(()=>{var e={};e.id=2829,e.ids=[2829],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},7252:e=>{"use strict";e.exports=require("express")},8086:e=>{"use strict";e.exports=require("module")},10043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var r=t(65239),i=t(48088),n=t(88170),a=t.n(n),l=t(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["admin",{children:["patients",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,81107)),"C:\\Users\\lenovo\\Documents\\DevFlux\\health-management-system\\src\\app\\admin\\patients\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"C:\\Users\\lenovo\\Documents\\DevFlux\\health-management-system\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\lenovo\\Documents\\DevFlux\\health-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["C:\\Users\\lenovo\\Documents\\DevFlux\\health-management-system\\src\\app\\admin\\patients\\[id]\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/patients/[id]/page",pathname:"/admin/patients/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31585:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"4001fee60472c45c1bfd40908aaacee6e0f43d1e39":()=>r.t});var r=t(84853)},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},44708:e=>{"use strict";e.exports=require("node:https")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},59249:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>L});var r=t(60687),i=t(43210),n=t(16189),a=t(44493),l=t(6211),c=t(96834),d=t(32584),o=t(66420),x=t(29523),u=t(25607),h=t(69164),p=t(12095),m=t(19595),j=t(36644),f=t(24985),v=t(37162),g=t(44610),b=t(18857),N=t(50391),q=t(35265),C=t(69795),w=t(35137),y=t(57207),A=t(63503),P=t(27605),k=t(63442),S=t(45880),_=t(71669),z=t(89667),D=t(34729),V=t(21342),B=t(93500),R=t(29867),$=t(86410),M=t(19489);let I=S.z.object({event:S.z.string().min(3,"Visit purpose must be at least 3 characters."),details:S.z.string().min(10,"Please provide some initial details for the visit.")});function E({isOpen:e,onClose:s,patientName:t,onVisitCreate:i}){let n=(0,P.mN)({resolver:(0,k.u)(I),defaultValues:{event:"",details:""}});return(0,r.jsx)(A.lG,{open:e,onOpenChange:s,children:(0,r.jsxs)(A.Cf,{children:[(0,r.jsxs)(A.c7,{children:[(0,r.jsx)(A.L3,{children:"Create New Visit"}),(0,r.jsxs)(A.rr,{children:["Schedule a new visit for ",t,"."]})]}),(0,r.jsx)(_.lV,{...n,children:(0,r.jsxs)("form",{onSubmit:n.handleSubmit(function(e){i(e)}),className:"space-y-4",children:[(0,r.jsx)(_.zB,{control:n.control,name:"event",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Visit Purpose"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(z.p,{placeholder:"e.g., Follow-up Consultation",...e})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsx)(_.zB,{control:n.control,name:"details",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Initial Notes"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(D.T,{placeholder:"e.g., Patient to follow up on recent lab results.",...e,rows:4})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsxs)(A.Es,{children:[(0,r.jsx)(x.$,{type:"button",variant:"ghost",onClick:s,children:"Cancel"}),(0,r.jsx)(x.$,{type:"submit",children:"Create Visit"})]})]})})]})})}let U=S.z.object({medicine:S.z.string().min(2,"Medicine name is required."),dosage:S.z.string().min(1,"Dosage is required.")}),F=S.z.object({test:S.z.string().min(3,"Test name is required."),instructions:S.z.string().min(10,"Please provide detailed instructions for the lab.")});function L(){(0,n.useParams)().id;let{toast:e}=(0,R.dj)(),[s,t]=(0,i.useState)(null),[S,I]=(0,i.useState)([]),[L,T]=(0,i.useState)(!1),[G,Z]=(0,i.useState)(null),[O,H]=(0,i.useState)(!1),[J,K]=(0,i.useState)(null),[W,Q]=(0,i.useState)(!1),X=(0,P.mN)({resolver:(0,k.u)(U),defaultValues:{medicine:"",dosage:""}}),Y=(0,P.mN)({resolver:(0,k.u)(F),defaultValues:{test:"",instructions:""}}),ee=e=>{Z(e),T(!0)},es=e=>{s&&o.iU.deletePrescription(s.id,e)},et=e=>{let s=e.toLowerCase();return s.includes("lab test ordered")?(0,r.jsx)(u.A,{className:"h-4 w-4"}):s.includes("lab test results")?(0,r.jsx)(h.A,{className:"h-4 w-4"}):s.includes("check-up")||s.includes("admission")||s.includes("follow-up")||s.includes("diagnosis")||s.includes("registration")||s.includes("consultation")?(0,r.jsx)(p.A,{className:"h-4 w-4"}):s.includes("prescription")?(0,r.jsx)(m.A,{className:"h-4 w-4"}):(0,r.jsx)(j.A,{className:"h-4 w-4"})};return s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(a.Zp,{children:(0,r.jsxs)(a.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 space-y-0",children:[(0,r.jsxs)(d.eu,{className:"w-16 h-16 border",children:[(0,r.jsx)(d.BK,{src:s.avatarUrl,alt:s.name,"data-ai-hint":"person"}),(0,r.jsx)(d.q5,{className:"text-2xl",children:s.name.charAt(0)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(a.ZB,{className:"text-2xl md:text-3xl",children:s.name}),(0,r.jsxs)(a.BT,{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:[(0,r.jsx)("span",{className:"font-mono bg-muted text-muted-foreground px-2 py-1 rounded-md text-xs",children:s.id}),(0,r.jsx)(c.E,{variant:"Critical"===s.condition?"destructive":"secondary",children:s.condition}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 text-muted-foreground"})," ",s.gender]}),s.fingerprintId&&(0,r.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,r.jsx)(v.A,{className:"w-4 h-4"})," Biometrics Registered"]})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground pt-1",children:["Last Visit: ",s.lastVisit]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"xl:col-span-2 space-y-6",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"})," Medical History"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(x.$,{variant:"outline",onClick:()=>H(!0),children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Send to Lab"]}),(0,r.jsxs)(x.$,{onClick:()=>Q(!0),children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Create New Visit"]})]})]})}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)($.Kf,{children:s.medicalHistory.map(e=>(0,r.jsxs)($.Dd,{children:[(0,r.jsx)($.HV,{}),(0,r.jsxs)($.D8,{children:[(0,r.jsx)($.hP,{children:e.date}),(0,r.jsx)($.ln,{children:et(e.event)}),(0,r.jsx)($._A,{children:e.event})]}),(0,r.jsxs)($.lx,{children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Doctor: ",e.doctor]}),(0,r.jsx)(x.$,{variant:"link",size:"sm",className:"h-auto p-0 mt-2",onClick:()=>K(e),children:"View Visit Details"})]})]},e.id))})})]})}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"})," Prescriptions"]}),(0,r.jsxs)(x.$,{size:"sm",onClick:()=>{Z(null),T(!0)},children:[(0,r.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Add"]})]})}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(l.XI,{children:[(0,r.jsx)(l.A0,{children:(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nd,{children:"Medicine"}),(0,r.jsx)(l.nd,{children:"Status"}),(0,r.jsx)(l.nd,{children:(0,r.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)(l.BF,{children:S.map(e=>(0,r.jsxs)(l.Hj,{children:[(0,r.jsxs)(l.nA,{children:[(0,r.jsx)("div",{className:"font-medium",children:e.medicine}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.dosage})]}),(0,r.jsx)(l.nA,{children:(0,r.jsx)(c.E,{variant:"Pending"===e.status?"secondary":"Unavailable"===e.status?"destructive":"default",className:"Filled"===e.status?"bg-green-500":"",children:e.status})}),(0,r.jsx)(l.nA,{className:"text-right",children:(0,r.jsxs)(V.rI,{children:[(0,r.jsx)(V.ty,{asChild:!0,children:(0,r.jsxs)(x.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(C.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(V.SQ,{align:"end",children:[(0,r.jsxs)(V._2,{onClick:()=>ee(e),children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsxs)(B.Lt,{children:[(0,r.jsx)(B.tv,{asChild:!0,children:(0,r.jsxs)(x.$,{variant:"ghost",className:"w-full justify-start text-sm font-normal text-destructive hover:bg-destructive/10 hover:text-destructive px-2 py-1.5 relative flex cursor-default select-none items-center rounded-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Delete"})]})}),(0,r.jsxs)(B.EO,{children:[(0,r.jsxs)(B.wd,{children:[(0,r.jsx)(B.r7,{children:"Are you sure?"}),(0,r.jsxs)(B.$v,{children:["This action cannot be undone. This will permanently delete the prescription for ",e.medicine,"."]})]}),(0,r.jsxs)(B.ck,{children:[(0,r.jsx)(B.Zr,{children:"Cancel"}),(0,r.jsx)(B.Rx,{onClick:()=>es(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})})]},e.id))})]})})})]})})]}),(0,r.jsx)(A.lG,{open:L,onOpenChange:T,children:(0,r.jsxs)(A.Cf,{children:[(0,r.jsxs)(A.c7,{children:[(0,r.jsxs)(A.L3,{children:[G?"Edit":"Add New"," Prescription"]}),(0,r.jsx)(A.rr,{children:G?"Update the details for this medication.":`Prescribe a new medication for ${s.name}.`})]}),(0,r.jsx)(_.lV,{...X,children:(0,r.jsxs)("form",{onSubmit:X.handleSubmit(e=>{s&&(G?o.iU.updatePrescription({...G,medicine:e.medicine,dosage:e.dosage}):o.iU.addPrescription({patientName:s.name,medicine:e.medicine,dosage:e.dosage,doctor:"Admin",status:"Pending"}),T(!1),Z(null),X.reset())}),className:"space-y-4",children:[(0,r.jsx)(_.zB,{control:X.control,name:"medicine",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Medicine Name"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(z.p,{placeholder:"e.g., Atorvastatin",...e})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsx)(_.zB,{control:X.control,name:"dosage",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Dosage"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(z.p,{placeholder:"e.g., 20mg",...e})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsxs)(A.Es,{children:[(0,r.jsx)(x.$,{type:"button",variant:"ghost",onClick:()=>T(!1),children:"Cancel"}),(0,r.jsxs)(x.$,{type:"submit",children:[G?"Update":"Add"," Prescription"]})]})]})})]})}),(0,r.jsx)(A.lG,{open:O,onOpenChange:H,children:(0,r.jsxs)(A.Cf,{children:[(0,r.jsxs)(A.c7,{children:[(0,r.jsx)(A.L3,{children:"Send to Lab"}),(0,r.jsxs)(A.rr,{children:["Provide instructions for the lab technician for patient ",s.name,"."]})]}),(0,r.jsx)(_.lV,{...Y,children:(0,r.jsxs)("form",{onSubmit:Y.handleSubmit(t=>{s&&(o.bs.addLabTest({patient:s.name,test:t.test,instructions:t.instructions,doctor:"Admin"}),H(!1),Y.reset(),e({title:"Lab Request Sent",description:`Instructions for ${s?.name} have been sent to the lab.`}))}),className:"space-y-4",children:[(0,r.jsx)(_.zB,{control:Y.control,name:"test",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Test Name"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(z.p,{placeholder:"e.g., Complete Blood Count (CBC)",...e})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsx)(_.zB,{control:Y.control,name:"instructions",render:({field:e})=>(0,r.jsxs)(_.eI,{children:[(0,r.jsx)(_.lR,{children:"Lab Instructions"}),(0,r.jsx)(_.MJ,{children:(0,r.jsx)(D.T,{placeholder:"e.g., Please perform a Complete Blood Count (CBC) and a lipid panel.",...e,rows:4})}),(0,r.jsx)(_.C5,{})]})}),(0,r.jsxs)(A.Es,{children:[(0,r.jsx)(x.$,{type:"button",variant:"ghost",onClick:()=>H(!1),children:"Cancel"}),(0,r.jsx)(x.$,{type:"submit",children:"Send Request"})]})]})})]})})]}),J&&s&&(0,r.jsx)(M.a,{isOpen:!!J,onClose:()=>K(null),visit:J,patient:s}),s&&(0,r.jsx)(E,{isOpen:W,onClose:()=>Q(!1),patientName:s.name,onVisitCreate:t=>{s&&(o.RQ.createVisit(s.id,t.event,t.details,"Admin"),e({title:"Visit Created",description:`A new visit has been scheduled for ${s.name}.`}),Q(!1))}})]}):(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{children:(0,r.jsx)(a.ZB,{children:"Patient not found"})}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)("p",{children:"The requested patient could not be found."})})]})}},60578:(e,s,t)=>{Promise.resolve().then(t.bind(t,81107))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67969:(e,s,t)=>{"use strict";function r(e,[s,t]){return Math.min(t,Math.max(s,e))}t.d(s,{q:()=>r})},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78730:(e,s,t)=>{Promise.resolve().then(t.bind(t,59249))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81107:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\lenovo\\\\Documents\\\\DevFlux\\\\health-management-system\\\\src\\\\app\\\\admin\\\\patients\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\lenovo\\Documents\\DevFlux\\health-management-system\\src\\app\\admin\\patients\\[id]\\page.tsx","default")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},99111:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(37413),i=t(37570),n=t(95177),a=t(50417);function l({children:e}){return(0,r.jsx)(a.SidebarProvider,{children:(0,r.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,r.jsx)(i.AppSidebar,{role:"admin"}),(0,r.jsx)(a.SidebarInset,{children:(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(n.AppHeader,{role:"Admin"}),(0,r.jsx)("main",{className:"flex-1 p-4 md:p-6 lg:p-8",children:e}),(0,r.jsx)("footer",{className:"py-4 px-6 text-center text-sm text-muted-foreground",children:"Powered by DevFlux 2025"})]})})]})})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,5,9861,2331,1758,8123,9596,2913,7693,7749,6779],()=>t(10043));module.exports=r})();